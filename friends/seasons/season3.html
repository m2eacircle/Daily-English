<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Friends Season 3 â€” Daily English</title>
  <link rel="stylesheet" href="../../css/style.css">
</head>
<body>

<header class="topbar">
  <div class="topbar-left">
    <button class="btn-topbar-home" onclick="goHome()" title="Home" aria-label="Home">ğŸ </button>
    <div class="topbar-logo">
      <span class="logo-accent">Daily</span> <span class="logo-day">English</span>
    </div>
  </div>
  <div class="topbar-right">
    <a class="m2ea-link" href="https://www.m2eacircle.com/entertainment/index.html" target="_blank" rel="noopener">
      <span class="m2ea-icon">ğŸŒ</span>
      <span class="label">m2ea Circle</span>
    </a>
  </div>
</header>

<main>
  <div class="page-wrap">

    <nav class="nav-row" aria-label="Page navigation">
      <button class="btn-nav home" onclick="goHome()">ğŸ  Home</button>
      <button class="btn-nav" onclick="window.location.href='../index.html'">â—€ Back to Friends</button>
    </nav>

    <nav class="breadcrumb" aria-label="Breadcrumb">
      <a href="../../index.html">Home</a>
      <span class="sep">â€º</span>
      <a href="../index.html">Friends</a>
      <span class="sep">â€º</span>
      <span class="current">Season 3</span>
    </nav>

    <div class="page-header">
      <div class="page-header-thumb" id="seasonThumb">
        <img src="../images/season3.jpg" alt="Friends Season 3"
          onerror="this.parentElement.innerHTML='ğŸ¬';">
      </div>
      <div class="page-header-info">
        <div class="page-header-title">Friends â€” Season 3</div>
        <div class="page-header-meta" id="seasonMeta">24 Episodes Â· Click an episode to explore expressions</div>
        <div class="page-header-actions">
          <button class="btn-bm" data-bm-id="season-friends-s3"
            onclick="toggleBookmark('season','season-friends-s3','ğŸ¬ Friends Season 3','friends/seasons/season3.html')">
            ğŸ”– Bookmark
          </button>
        </div>
      </div>
    </div>

    <div class="bookmark-bar" id="bookmarkBar">
      <div class="bookmark-bar-head">
        <span class="bm-icon">ğŸ”–</span>
        <span>Your Bookmarks</span>
      </div>
      <div class="bookmark-chips" id="bookmarkChips"></div>
    </div>

    <div class="section-label">Episodes â€” Season 3</div>
    <div class="episode-grid" id="episodeGrid"></div>

  </div>
</main>

<script src="../../js/app.js"></script>
<script src="../friends-data.js"></script>
<script>
  const SEASON_NUM = 3;

  function goHome() {{ window.location.href = '../../index.html'; }}

  /* Episode icons cycling */
  const EP_ICONS = ['â˜•','ğŸ¬','ğŸ­','ğŸƒ','ğŸŒŸ','ğŸµ','ğŸƒ','ğŸ’¡','ğŸŒ™','ğŸ',
                    'ğŸ•','ğŸ’¼','ğŸšª','ğŸŒº','ğŸ¤','ğŸ“±','ğŸŒŠ','ğŸ¡','ğŸ¯','ğŸŒˆ',
                    'ğŸª','ğŸŒ','ğŸ’«','ğŸ¶'];

  function buildEpisodeGrid() {{
    const grid = document.getElementById('episodeGrid');
    let html = '';
    for (let e = 1; e <= 24; e++) {{
      const epData = getEpisodeData(SEASON_NUM, e);
      const bmId   = `episode-friends-s${{SEASON_NUM}}e${{e}}`;
      const url    = `../episodes/s${{SEASON_NUM}}e${{e}}.html`;
      const icon   = epData.icon || EP_ICONS[(e-1) % EP_ICONS.length];
      const imgSrc = epData.image || `../images/s${{SEASON_NUM}}e${{e}}.jpg`;

      html += `
        <a class="episode-card" href="${{url}}" aria-label="Season ${{SEASON_NUM}} Episode ${{e}}">
          <button class="bm-corner" data-bm-id="${{bmId}}"
            onclick="event.preventDefault(); event.stopPropagation();
                     toggleBookmark('episode','${{bmId}}','ğŸ“‹ Friends S${{SEASON_NUM}}E${{e}}','friends/episodes/s${{SEASON_NUM}}e${{e}}.html')"
            title="Bookmark Episode ${{e}}" aria-label="Bookmark">ğŸ”–</button>
          ${{epData.image
            ? `<img class="episode-card-img" src="${{imgSrc}}" alt="Episode ${{e}}"
                onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
               <div class="episode-card-placeholder" style="display:none">${{icon}}<span class="episode-num-badge">S${{SEASON_NUM}}Â·E${{e}}</span></div>`
            : `<div class="episode-card-placeholder">${{icon}}<span class="episode-num-badge">S${{SEASON_NUM}}Â·E${{e}}</span></div>`}}
          <div class="episode-card-body">
            <div class="episode-card-title">${{escHtml(epData.title)}}</div>
            <div class="episode-card-desc">${{escHtml(epData.description)}}</div>
          </div>
        </a>
      `;
    }}
    grid.innerHTML = html;
    syncBookmarkButtons();
  }}

  window.addEventListener('DOMContentLoaded', () => {{
    checkTermsGuard();
    buildEpisodeGrid();
    renderBookmarkBar();
  }});
</script>
</body>
</html>
